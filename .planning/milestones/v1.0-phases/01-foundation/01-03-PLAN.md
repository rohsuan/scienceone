---
phase: 01-foundation
plan: 03
type: execute
wave: 2
depends_on:
  - 01-01
files_modified:
  - src/app/(auth)/layout.tsx
  - src/app/(auth)/sign-up/page.tsx
  - src/app/(auth)/sign-in/page.tsx
  - src/app/(auth)/verify-email/page.tsx
  - src/components/auth/SignUpForm.tsx
  - src/components/auth/SignInForm.tsx
  - src/components/auth/GoogleSignInButton.tsx
  - src/components/auth/AuthCard.tsx
autonomous: true
requirements:
  - AUTH-01
  - AUTH-02

must_haves:
  truths:
    - "User can fill out sign-up form with name, email, and password and submit it"
    - "User sees friendly error messages on invalid input (e.g., 'That password doesn't look right')"
    - "User can sign in with email and password"
    - "User can sign in with Google"
    - "After sign-up, user is directed to a verify-email page explaining they need to check their inbox"
    - "Sign-up and sign-in forms validate input client-side with Zod before submission"
  artifacts:
    - path: "src/components/auth/SignUpForm.tsx"
      provides: "Sign-up form with name, email, password fields"
      contains: "signUp"
    - path: "src/components/auth/SignInForm.tsx"
      provides: "Sign-in form with email, password fields"
      contains: "signIn"
    - path: "src/components/auth/GoogleSignInButton.tsx"
      provides: "Google OAuth sign-in button"
      contains: "google"
    - path: "src/app/(auth)/sign-up/page.tsx"
      provides: "Sign-up page"
      contains: "SignUpForm"
    - path: "src/app/(auth)/sign-in/page.tsx"
      provides: "Sign-in page"
      contains: "SignInForm"
    - path: "src/app/(auth)/verify-email/page.tsx"
      provides: "Email verification pending page"
      min_lines: 15
    - path: "src/app/(auth)/layout.tsx"
      provides: "Auth pages layout (centered card)"
      min_lines: 10
  key_links:
    - from: "src/components/auth/SignUpForm.tsx"
      to: "src/lib/auth-client.ts"
      via: "authClient.signUp.email() call"
      pattern: "signUp\\.email"
    - from: "src/components/auth/SignInForm.tsx"
      to: "src/lib/auth-client.ts"
      via: "authClient.signIn.email() call"
      pattern: "signIn\\.email"
    - from: "src/components/auth/GoogleSignInButton.tsx"
      to: "src/lib/auth-client.ts"
      via: "authClient.signIn.social() call"
      pattern: "signIn\\.social"
    - from: "src/components/auth/SignUpForm.tsx"
      to: "src/lib/validations/auth.ts"
      via: "zodResolver(signUpSchema)"
      pattern: "signUpSchema"
---

<objective>
Build the complete authentication UI — sign-up form, sign-in form, Google OAuth button, email verification page — all wired to Better Auth client calls with Zod validation and friendly error messages.

Purpose: AUTH-01 (create account) and AUTH-02 (log in) require user-facing forms. This plan delivers every screen needed for the auth flow, using the auth-client and validation schemas set up in Plan 01.

Output: Sign-up page with name/email/password + Google sign-in, sign-in page with email/password + Google sign-in, verify-email landing page, all using shadcn/ui Form components with Zod validation and friendly error messages.
</objective>

<execution_context>
@/Users/roh/.claude/get-shit-done/workflows/execute-plan.md
@/Users/roh/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation/01-RESEARCH.md
@.planning/phases/01-foundation/01-CONTEXT.md
@.planning/phases/01-foundation/01-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create auth layout and reusable auth components</name>
  <files>
    src/app/(auth)/layout.tsx
    src/components/auth/AuthCard.tsx
    src/components/auth/GoogleSignInButton.tsx
  </files>
  <action>
    1. Create `src/app/(auth)/layout.tsx`:
       - Centered layout: full-height viewport, content centered both horizontally and vertically
       - Subtle background: use muted background color (light gray)
       - "ScienceOne" logo link at top center (serif font, links to "/")
       - No Header/Footer from (main) layout — auth pages are standalone with minimal chrome
       - Children rendered inside a max-w-md container

    2. Create `src/components/auth/AuthCard.tsx`:
       - Reusable wrapper used by both sign-up and sign-in pages
       - Props: `title` (string), `description` (string), `children` (ReactNode), `footer` (ReactNode for the "Already have an account?" link)
       - Uses shadcn Card (CardHeader, CardContent, CardFooter)
       - Title in serif font (academic aesthetic)
       - White background, subtle shadow, rounded corners

    3. Create `src/components/auth/GoogleSignInButton.tsx` ("use client"):
       - Button with Google icon (inline SVG — the standard Google "G" logo) and text "Continue with Google"
       - Full-width, outline variant
       - On click: call `authClient.signIn.social({ provider: "google", callbackURL: "/dashboard" })`
       - Loading state: show spinner/disabled while redirect is happening
       - Import signIn from `@/lib/auth-client`
  </action>
  <verify>
    - `src/app/(auth)/layout.tsx` exists and renders a centered layout
    - `src/components/auth/AuthCard.tsx` accepts title, description, children, footer props
    - `src/components/auth/GoogleSignInButton.tsx` calls signIn.social on click
    - `npx tsc --noEmit` — no TypeScript errors in these files
  </verify>
  <done>
    Auth layout provides centered, minimal-chrome container for auth pages. AuthCard wraps form content in a consistent card. GoogleSignInButton triggers Google OAuth flow via Better Auth client.
  </done>
</task>

<task type="auto">
  <name>Task 2: Build sign-up, sign-in, and verify-email pages</name>
  <files>
    src/app/(auth)/sign-up/page.tsx
    src/app/(auth)/sign-in/page.tsx
    src/app/(auth)/verify-email/page.tsx
    src/components/auth/SignUpForm.tsx
    src/components/auth/SignInForm.tsx
  </files>
  <action>
    1. Create `src/components/auth/SignUpForm.tsx` ("use client"):
       - Use `react-hook-form` with `zodResolver(signUpSchema)` from `@/lib/validations/auth`
       - Fields: Name (text input), Email (email input), Password (password input)
       - Use shadcn Form, FormField, FormControl, FormItem, FormLabel, FormMessage, Input, Button
       - On submit:
         a. Call `authClient.signUp.email({ name, email, password, callbackURL: "/dashboard" })`
         b. If error: map error status codes to friendly messages per user decision:
            - 422 / validation: "Please check your details and try again."
            - 409 / already exists: "An account with this email already exists. Try signing in instead."
            - Default: "Something went wrong. Please try again."
         c. Set form-level error via `form.setError("root", { message })`
         d. If success: redirect to `/verify-email` (use `router.push`)
       - Loading state: Button shows "Creating account..." while submitting, disabled
       - Password field: include a visibility toggle (eye icon) — use a small button inside the input or adjacent

    2. Create `src/components/auth/SignInForm.tsx` ("use client"):
       - Use `react-hook-form` with `zodResolver(signInSchema)` from `@/lib/validations/auth`
       - Fields: Email (email input), Password (password input)
       - On submit:
         a. Call `authClient.signIn.email({ email, password, rememberMe: true })`
         b. If error: friendly messages:
            - 401: "That password doesn't look right. Try again or reset it."
            - 403: "Please verify your email first. Check your inbox."
            - Default: "Something went wrong. Please try again."
         c. Set form-level error via `form.setError("root", { message })`
         d. If success: redirect to `/dashboard` (use `router.push`)
       - Loading state: Button shows "Signing in..." while submitting
       - "Forgot password?" link below password field (href="#" placeholder for now)

    3. Create `src/app/(auth)/sign-up/page.tsx`:
       - Use AuthCard wrapper: title "Create your account", description "Start reading STEM books with beautifully rendered mathematics"
       - Render SignUpForm inside AuthCard
       - Below form: Separator with "or" text, then GoogleSignInButton
       - Footer: "Already have an account? Sign in" link (href="/sign-in")
       - Page metadata: title "Sign Up — ScienceOne"

    4. Create `src/app/(auth)/sign-in/page.tsx`:
       - Use AuthCard wrapper: title "Welcome back", description "Sign in to continue reading"
       - Render SignInForm inside AuthCard
       - Below form: Separator with "or" text, then GoogleSignInButton
       - Footer: "Don't have an account? Sign up" link (href="/sign-up")
       - Page metadata: title "Sign In — ScienceOne"

    5. Create `src/app/(auth)/verify-email/page.tsx`:
       - Use AuthCard wrapper: title "Check your email", description "We sent you a verification link"
       - Body: Icon (mail icon — inline SVG or use a simple emoji-free illustration), explanatory text: "Click the link in the email we sent to verify your account. Once verified, you can sign in and start reading."
       - "Didn't receive the email?" section with a "Resend verification email" button (wire to a placeholder action or Better Auth resend endpoint if available)
       - "Back to sign in" link at bottom
       - Page metadata: title "Verify Email — ScienceOne"

    6. Verify full flow: Visit `/sign-up`, fill form, see validation errors on invalid input, see friendly error messages. Visit `/sign-in`, see the form. Visit `/verify-email`, see the instruction page.
  </action>
  <verify>
    - Visit `http://localhost:3000/sign-up` — form renders with name, email, password fields, Google button, and "Already have an account?" link
    - Submit with empty fields — validation messages appear inline
    - Submit with short password — friendly validation message appears
    - Visit `http://localhost:3000/sign-in` — form renders with email, password, Google button, and "Don't have an account?" link
    - Visit `http://localhost:3000/verify-email` — instructions page renders with explanation and resend option
    - All pages use the academic aesthetic (serif headings, navy accents)
    - `npx tsc --noEmit` — no TypeScript errors
  </verify>
  <done>
    Complete auth UI flow: sign-up form with name/email/password + Google OAuth, sign-in form with email/password + Google OAuth, verify-email instruction page. All forms use Zod validation with shadcn Form components and show friendly, user-decision-compliant error messages. Forms call Better Auth client methods for actual auth operations.
  </done>
</task>

</tasks>

<verification>
1. `/sign-up` renders with all fields, validates with Zod, calls authClient.signUp.email on submit
2. `/sign-in` renders with all fields, validates with Zod, calls authClient.signIn.email on submit
3. Both pages offer Google sign-in via GoogleSignInButton
4. Error messages are friendly per user decision (not "Invalid credentials" — use "That password doesn't look right")
5. `/verify-email` provides clear instructions and resend option
6. All pages use auth layout (centered, minimal chrome) with academic styling
7. `npx tsc --noEmit` passes
</verification>

<success_criteria>
- User can navigate to /sign-up, fill out name/email/password, and submit the form
- User can navigate to /sign-in, fill out email/password, and submit the form
- Both pages offer Google OAuth as an alternative
- Validation errors display inline with friendly messages
- Form submission calls Better Auth client methods correctly
- Verify-email page guides user to check their inbox
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-03-SUMMARY.md`
</output>
